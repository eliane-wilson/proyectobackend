{{> header}}

<h1>Todos los productos</h1>

<div>
  <form id="filterForm">
    <input type="text" name="query" placeholder="Buscar por categoría o disponibilidad">
    <select name="sort">
      <option value="">Ordenar por precio</option>
      <option value="asc">Ascendente</option>
      <option value="desc">Descendente</option>
    </select>
    <button type="submit">Filtrar</button>
  </form>
</div>

<div id="productsList">
  {{#each products}}
    <div class="product-card">
      <h2>{{this.title}}</h2>
      <p>{{this.description}}</p>
      <p>Precio: ${{this.price}}</p>
      <p>Stock: {{this.stock}}</p>
      <p>Categoría: {{this.category}}</p>
      <button class="addToCart" data-id="{{this._id}}">Agregar al carrito</button>
      <a href="/products/{{this._id}}">Ver detalles</a>
    </div>
  {{/each}}
</div>

<div class="pagination">
  {{#if hasPrevPage}}
    <a href="?page={{prevPage}}&limit={{limit}}">Anterior</a>
  {{/if}}
  <span>Página {{page}} de {{totalPages}}</span>
  {{#if hasNextPage}}
    <a href="?page={{nextPage}}&limit={{limit}}">Siguiente</a>
  {{/if}}
</div>

<script src="/js/products.js"></script>
